---
layout: default
---
{% capture color %}{{ page.color | default: site.color | default: "red" }}{% endcapture %}
{% assign title = page.title %}
{% assign description = page.description %}
{% assign content = content | strip %}

{% if page.type == "home" %}
  {% capture title %}{{ site.title }}{% endcapture %}
  {% capture description %}{{ site.description }}{% endcapture %}
{% elsif page.permalink == "/categories.html" %}
  {% capture title %}{{ site.categoriesLabel }}{% endcapture %}
  {% capture description %}{{ site.categoriesDescription }}{% endcapture %}
{% elsif page.permalink == "/tags.html" %}
  {% capture title %}{{ site.tagsLabel }}{% endcapture %}
  {% capture description %}{{ site.tagsDescription }}{% endcapture %}
{% elsif page.permalink == "/about.html" %}
  {% capture title %}{{ site.aboutLabel }}{% endcapture %}
  {% capture description %}{{ site.aboutDescription }}{% endcapture %}
{% elsif page.permalink == "/friends.html" %}
  {% capture title %}{{ site.friendsLabel }}{% endcapture %}
  {% capture description %}{{ site.friendsDescription }}{% endcapture %}
{% elsif page.permalink == "/404.html" %}
  {% capture title %}{{ site.errorLabel }}{% endcapture %}
  {% capture description %}{{ site.errorDescription }}{% endcapture %}
{% endif %}

{% assign list = "" | split: "" %}
{% if page.permalink == "/categories.html" %}
  {% for item in site.categories %}{% assign list = list | push: item[0] %}{% endfor %}
{% elsif page.permalink == "/tags.html" %}
  {% for item in site.tags %}{% assign list = list | push: item[0] %}{% endfor %}
{% endif %}
{% assign list = list | sort %}

<div class="w-acg min-h-screen py-16">
  <div class="w-full flex flex-col justify-center items-center content-center text-{{ color }}-50
    {% if page.type == "home" %}h-screen select-none pb-16{% else %}py-32{% endif %}"
  >
    <!-- title -->
    <div class="text-center text-4xl font-serif py-8">
      {% if page.type == "category" %}
        {% include item-category.html name=title title=true %}
      {% elsif page.type == "tag" %}
        {% include item-tag.html name=title title=true %}
      {% else %}
        {{ title }}
      {% endif %}
    </div>
    <!-- description -->
    <div class="text-center text-base font-sans py-8">{{ description }}</div>
    <!-- categories/tags: list -->
    <div class="flex flex-wrap justify-center items-center content-center select-none">
    {% if page.permalink == "/categories.html" %}
      {% for name in list %}{% assign count = site.categories[name].size %}
      <div class="m-1 px-2 bg-{{ color }}-50 bg-opacity-75 rounded">{% include item-category.html name=name count=count %}</div>
      {% endfor %}
    {% elsif page.permalink == "/tags.html" %}
      {% for name in list %}{% assign count = site.tags[name].size %}
      <div class="m-1 px-2 bg-{{ color }}-50 bg-opacity-75 rounded">{% include item-tag.html name=name count=count %}</div>
      {% endfor %}
    {% endif %}
    </div>
  </div>

  <!-- article -->
  {% if page.type == "post" %}
    <div class="flex flex-wrap">
      <div class="flex-grow">
        {% include chip.html type="date" text=page.date width=4 %}
      </div>
      <div class="flex flex-wrap">
        {% for category in page.categories %}
          {% include chip.html type="category" text=category width=4 %}
        {% endfor %}
        {% for tag in page.tags %}
          {% include chip.html type="tag" text=tag width=4 %}
        {% endfor %}
      </div>
    </div>
    <article class="w-full my-4 mx-auto p-4 rounded-lg text-black bg-{{ color }}-50 bg-opacity-75 markdown-body">
      <h1>{{ title }}</h1>
      {% include toc.html html=content %}
      {{ content }}
    </article>
    {% include flip.html %}
  {% elsif content != empty %}
    <article class="w-full my-4 mx-auto p-4 rounded-lg text-black bg-{{ color }}-50 bg-opacity-75 markdown-body">
      {{ content }}
    </article>
  {% endif %}
  <!-- posts -->
  {% if page.type == "home" %}
    <div class="w-full p-4 flex flex-col space-y-4">{% include posts.html posts=site.posts%}</div>
    <div class="w-full p-4">{% include paginator.html %}</div>
  {% elsif page.posts %}
    <div class="w-full p-4 flex flex-col space-y-4">{% include posts.html posts=page.posts %}</div>
  {% endif %}
</div>
